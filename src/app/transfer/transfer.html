<div class="transfer-container">
  <form #f="ngForm" novalidate>
    <h1 align="center">Add Transaction Details</h1>

    <!-- From Account Id -->
    <label for="txtName" class="form-label">From Account Id</label>
    <input
      type="text"
      id="txtName"
      class="form-control"
      name="fromId"
      [(ngModel)]="transferreq.fromId"
      required
      pattern="^\d+$"
      inputmode="numeric"
      #fromIdModel="ngModel"
    />
    <div class="text-danger mt-1" *ngIf="fromIdModel.invalid && (fromIdModel.dirty || fromIdModel.touched)">
      <div *ngIf="fromIdModel.errors?.['required']">From account id is required.</div>
      <div *ngIf="fromIdModel.errors?.['pattern']">From account id must be a valid integer.</div>
    </div>

    <!-- To Account -->
    <label for="txtJob" class="form-label">To Accout</label>
    <input
      type="text"
      id="txtJob"
      class="form-control"
      name="toId"
      [(ngModel)]="transferreq.toId"
      required
      pattern="^\d+$"
      inputmode="numeric"
      #toIdModel="ngModel"
    />
    <div class="text-danger mt-1" *ngIf="toIdModel.invalid && (toIdModel.dirty || toIdModel.touched)">
      <div *ngIf="toIdModel.errors?.['required']">Recipient account id is required.</div>
      <div *ngIf="toIdModel.errors?.['pattern']">Account id must be a valid integer.</div>
    </div>

    <!-- Amount -->
    <label for="txtSal" class="form-label">Amount</label>
    <input
      type="text"
      id="txtSal"
      class="form-control"
      name="amount"
      [(ngModel)]="transferreq.amount"
      required
      pattern="^\d+(\.\d{1,2})?$"
      inputmode="decimal"
      #amountModel="ngModel"
    />
    <div class="text-danger mt-1" *ngIf="amountModel.invalid && (amountModel.dirty || amountModel.touched)">
      <div *ngIf="amountModel.errors?.['required']">Amount is required.</div>
      <div *ngIf="amountModel.errors?.['pattern']">Use a positive number with up to 2 decimals (e.g., 1234.56).</div>
    </div>

    <!-- Cross-field: same account -->
    <div
      class="text-danger mt-2"
      *ngIf="
        fromIdModel.valid &&
        toIdModel.valid &&
        (fromIdModel.touched || toIdModel.touched) &&
        (+transferreq.fromId === +transferreq.toId)
      "
    >
      You cannot transfer to the same account.
    </div>

    <div class="form-text mb-2">Maximum allowed: {{ MAX_AMOUNT | number }}</div>

    <button type="button" (click)="transferMoney()" class="btn btn-primary">Transfer</button>
    &nbsp;&nbsp;

    <!-- Status box -->
    <div class="mt-3" *ngIf="statusMessage">
      <div
        class="alert"
        [ngClass]="{
          'alert-success': isSuccess,
          'alert-danger': !isSuccess
        }"
        role="alert"
      >
        {{ statusMessage }}
      </div>
    </div>

    <div *ngIf="showBackButton" class="back-button">
      <button type="button" (click)="navigate()">Back</button>
    </div>
  </form>
</div>